---
# JSON解析とai\_caption生成タスクプロンプト（最終確定版）
## 0. 実行指示（厳守）
入力としてJSONを貼り付けたら、即座に**JSON解析とai\_caption生成タスクを開始**すること。
---

## 1. 目的
提供された入力JSONデータに対し、以下の手順を順守して処理を行い、処理後の**完全なJSONを返却**すること。
1. 入力JSONデータ全体から、**全角スペース（U+3000）**と**NBSP（U+00A0）**をすべて除去する。
2. 各商品オブジェクトについて、すべてのルールに基づき**ai\_caption**フィールドに適切な投稿文を生成して挿入する。
---

## 2. 投稿文のトーン、前提、および長さ
| 項目 | 詳細 |

| :--- | :--- |

| **前提** | ユーザーは商品を**「未購入・未注文」**の状態であり、**「これいいな」「欲しいな」という強い関心や願望**を持っているという前提で投稿文を組み立てる。 |
セリフ内に**ワード**のように協調文字を入れないことを徹底してください。

| **トーン** | **フレンドリーで親しみやすい表現**を心がける**です・ます調で**。**肯定的で前向きな感情**を表現する。（例：「欲しいです！」「届くのが楽しみです」「これは良さそうですね！」など） |

| **文字数** | 投稿文の文字数は、**ハッシュタグを含めて200文字程度**（±20文字）とする。 |

| **絵文字** | 投稿文に**３個に１投稿は絵文字を1〜2個**まで含めることが可能とする。 |

---
## 3. 情報源の優先順位と内容抽出
投稿文の内容は、以下の**優先順位**で情報源から抽出・インスピレーションを得ること。

### 基本の優先順位（商品数30件未満の場合）

1. **item\_description（商品説明）**: 画像情報に加えて、商品の**詳細な特徴や機能、利点**を補完する形で使用する。

### 省力化ルール（JSON内の商品数が30件以上の場合）

ai_captionにメタ情報（例：※商品数が30件以上のため、**item_descriptionのみ参照**）を入れることは禁止

---
## 4. 必須の前処理とフォーマット・禁止事項（厳守）

| 項目 | 詳細 | 厳守事項 |

| :--- | :--- | :--- |

| **前処理** | 入力JSONデータ全体から、**全角スペース（U+3000）**と**NBSP（U+00A0）**を**すべて除去**する。 | 投稿文生成前に実施すること。 |

| **必須要素** | 投稿文の最後に、内容に合った**ハッシュタグを3〜5個**含めること。 | `#`を付けて改行後に挿入すること。 |

| **購入完了の表現禁止** | **「注文しました」「GETしました」「使ってみました」**など、**購入・体験済みの表現は使用しない**。 | 過去形・完了形・体験済みの表現は使用しない。 |

---

## 5. 入力と出力の形式

**入力:**

元のJSONデータ。


**出力:**

1. スペース除去の前処理を実施し、
2. ai\_captionフィールドに生成された投稿文が挿入された、

**完全なJSONデータ。**

データの表示はストリーミング表示をやめ、できた時点で一括表示すること。

### 出力形式の厳守事項
- **返答には、生成されたJSONデータのみを含めること。**
- **もういちどいいます！返答には、生成されたJSONデータのみを含めること。**
- **説明文、前置き、後書き、その他の会話（例：「はい、承知いたしました。」、「以下が生成されたJSONです。」など）は一切含めないこと。**

---
